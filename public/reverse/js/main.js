// Generated by CoffeeScript 1.3.1
(function() {
  "use strict";

  var Message;

  if (navigator.language === "ja") {
    Message = {
      openWithChrome: "Chrome で開いてね!!",
      dragAndDropToPlay: "音楽ファイルをドラッグ & ドロップすると再生します.",
      play: "再生を開始します.",
      cannotPlay: "再生できないファイルです."
    };
  } else {
    Message = {
      openWithChrome: "Please open with Chrome",
      dragAndDropToPlay: "Drag & drop an audio file to play",
      play: "Play",
      cannotPlay: "Cannot play"
    };
  }

  jQuery(function() {
    var $body, synth;
    synth = T("audio").set({
      loop: true,
      reversed: true
    }).play();
    synth.onloadedmetadata = function() {
      $("#text").text(Message.play);
      return setTimeout(function() {
        return $("#text").text(Message.dragAndDropToPlay);
      }, 5000);
    };
    synth.onerror = function(e) {
      return $("#text").text(Message.cannotPlay);
    };
    $body = $(document.body);
    $body.on("dragover", function(e) {
      e.preventDefault();
      return e.stopPropagation();
    });
    $body.on("drop", function(e) {
      var file;
      e.preventDefault();
      e.stopPropagation();
      file = e.originalEvent.dataTransfer.files[0];
      return synth.set({
        src: file
      }).load();
    });
    if (timbre.env === "webkit") {
      return $("#text").text(Message.dragAndDropToPlay);
    } else {
      return $("#text").text(Message.openWithChrome);
    }
  });

}).call(this);
