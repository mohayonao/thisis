// Generated by CoffeeScript 1.3.1
(function() {
  "use strict";

  jQuery(function() {
    var $body, ctx, synth;
    synth = T("buffer").set({
      loop: true,
      reversed: true
    }).play();
    ctx = new webkitAudioContext();
    $body = $(document.body);
    $body.on("dragover", function(e) {
      e.preventDefault();
      return e.stopPropagation();
    });
    $body.on("drop", function(e) {
      var file, reader;
      e.preventDefault();
      e.stopPropagation();
      file = e.originalEvent.dataTransfer.files[0];
      reader = new FileReader();
      reader.onload = function(e) {
        var buffer;
        try {
          buffer = ctx.createBuffer(e.target.result, true).getChannelData(0);
          synth.buffer = buffer;
          return $("#text").text("逆再生します.");
        } catch (e) {
          return $("#text").text("再生できないファイルです.");
        }
      };
      return reader.readAsArrayBuffer(file);
    });
    if (timbre.env === "webkit") {
      return $("#text").text("ドラッグ & ドロップで逆再生します.");
    } else {
      return $("#text").text("Chrome で開いてね!!");
    }
  });

}).call(this);
